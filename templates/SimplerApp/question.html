{% extends 'SimplerApp/base.html' %}
{% load static %}

{% block scripts_block %}
<script src="{% static 'js/question.js' %}"></script>
{% endblock %}

{% block basiccss %}
<link href="{% static 'css/question.css' %}" rel="stylesheet" />
{% endblock %}

{% block css_block %}
<link href="{% static 'css/highlight.css' %}" rel="stylesheet" />
{% endblock %}

{% block body_block %}

{% autoescape off %}
<div id="wrap">
<div id="upperwrapper">

	<div class="authwrapper">

		<img class="thumb" data-username="{{ques.req_by.username}}"/>
	<div class="author">Question By <br/><a href="javascript:;" class="getup" data="{{ques.req_by.id}}">{{ques.req_by.username}}</a></div>

</div>

	<div class="viewcontext"><a href='/sutton/{{contextsimplerid}}'><button class="btn btn-default" style="position:absolute; top:0; right:0;">View Context</button></div></a>

	<div class="mainques" data-id="{{ques.id}}" data-hid="{{ques.highlight.id}}">{{ques}}</div>

 	<div id="details">{% if ques.assignment == 'y' %}{{ques.highlight.highlight_parent.answer}}{% endif %}</div>

	<div id="numjumwrapper" class='numjumpwrapper'><span class="numanswers"><a href="javascript:;" class="showquill" style="text-decoration:none;">Add Answer</a> <span id="bull">&bull;</span> <span id="anscounti">{{anscount}} Answers </span><span id="anscountf" style="display:none;"><a href="javascript:;" style="text-decoration:none;">View {{anscount}} Answers </a></span></span></div>

</div>
</div>
{% endautoescape %}

{% autoescape off %}

	{% for rques in rquestions %}

	<div class="rquesheader questionon-{{rques.highlight.highlight_parent.id}}" data-id="{{rques.id}}" style="display:none;">

		<div class="rques hid-{{rques.highlight.id}} parent-{{rques.highlight.highlight_parent.id}}"><a href="/question/{{rques.id}}">{{rques.question}}</a>
		<button class="btn btn-default addanswer" style="display:none;"><a href="/addsimpler/{{rques.id}}">Add Answer.</a></button></div>

	</div>

	{% endfor %}

	{% endautoescape %}

<div id="fixedpane">

	<div class="triangle"></div>

	<div class="instruct">Select any text to add a question<br/> Or, click on a dot to view related question(s).</div>

	<div id="quescrate"></div>

	<div id="qinst" style="display:none;">Add another question on this quabl below.</div>

<div id="quesboxwrapper" style="display:none;">

	<textarea id="contextquesbox"></textarea>
	<button class="btn btn-primary askcontques" disabled="true">Ask Question</button><br/>
	{% if user.username == 'ravi' or user.username == 'priyatosh' %}
	<span style="font-size:9pt; color:#C0C0C0;"><input type="checkbox" id="assigncheckcq" class="assigncheck"/> MARK AS ASSIGNMENT</span>
	{% else %}
	<span style="font-size:9pt; color:#C0C0C0;"><input type="checkbox" id="anoncheckcq" class="anoncheck"/> ASK ANONYMOUSLY</span>
	{% endif %}
</div>

<div id="queswrapper" style="display:none;">

	<textarea id="quesbox"></textarea>
	<button class="btn btn-primary askques" disabled="true">Ask Question</button><br/>
	{% if user.username == 'ravi' or user.username == 'priyatosh' %}
	<span style="font-size:9pt; color:#C0C0C0;"><input type="checkbox" id="assigncheckq" class="assigncheck"/> MARK AS ASSIGNMENT</span>
	{% else %}
	<span style="font-size:9pt; color:#C0C0C0;"><input type="checkbox" id="anoncheckq" class="anoncheck"/> ASK ANONYMOUSLY</span>
	{% endif %}
</div>

</div>
<!--div class="shortquespane" style="display:none; font-size:13pt;">{{ques}}</div-->
<div class="answer-area">

	<div class="quilleditor" style="display:none;float:left; width:100%; font-size:12pt;">

		<div id="toolbar">
			<button class="ql-bold btn btn-default ql-btn " style="padding: 5px 10px;">B</button>
			<button class="ql-italic btn btn-default ql-btn" style="padding: 5px 13px;">I</button>
			<button class="ql-underline btn btn-default ql-btn" style="padding: 5px 10px;">U</button>
			<button class="ql-image btn btn-default ql-btn" style="padding: 5px 10px;">Insert Image</button>
		</div>
		<div id='editor'></div>
		{% csrf_token %}
		<button type="button" class="btn btn-primary addsimp" id="{{ques.id}}" style="margin-top: 5px; position:relative; left:77%; border-radius:0px;" disabled="true">Add Answer</button>

	</div>

{% autoescape off %}

	{% for answer in answers %}

	<div class="nthanswer">

		<div class="withwriter">

		<div class="answer" data-id="{{answer.id}}" data-text="{{answer.post.id}}">
			{{answer.answer}}
			</div>

			<div class="aldwrapper"><div class="ansloaddot"></div></div>

			<div class="writerwrap">
				<img class="thumb" data-username="{{answer.writer.username}}"/>
				<div class="writerinfo">Answer by <br/><a href="javascript:;" class="getup" data="{{answer.writer.id}}">{{answer.writer.username}}</a></div>
			</div>

			<div style="position:absolute; right:15px; bottom:0;" class="upnumup"><span class="upnum" style="font-size:13pt; color:grey; padding-right:5px;">{{answer.upvoters.all|length}}</span><span style="color:grey;">&bull;</span>
			<span><button class="btn btn-primary up" data-ansid={{answer.id}} >Upvote Answer</button></span></div>
		</div>

			<div class="relques"></div>

	</div>

	{% endfor %}

{% endautoescape %}
</div>

<div id="dumps">

<div id="empty" style="display:none;"></div>
<div id="rquesdump" style="display:none;"></div>
<div id="anscounter" style="display:none;">{{anscount}}</div>
<div id="ansdump" style="display:none;"></div>
<div id="highlightdump" style="display:none;"></div>

</div>
{% endblock %}
